<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.project.tripinfo.repository.BoardLikeMapper">

    <insert id="createBoardLike">
        INSERT INTO board_like (board_no, member_id)
        VALUES (#{board_no},#{member_id})
    </insert>
    <delete id="deleteBoardLike">
        DELETE FROM board_like
        WHERE board_no = #{board_no} AND member_id = #{member_id}
    </delete>
    <select id="updateBoardLike">
        UPDATE board
        SET
            board_likecnt = (SELECT COUNT(*)
                             FROM board_like
                             WHERE board_no = #{board_no})
                            WHERE board_no = #{board_no}
    </select>

    <select id="getBoardLike" resultType="int">
        SELECT COUNT(member_id)
                FROM board_like
                        WHERE board_no = #{board_no} AND member_id = #{member_id}
    </select>
</mapper>